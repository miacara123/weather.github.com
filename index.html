<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Title</title>
    <style>
        .title {
            display: flex;
            width: 80%;
            margin: 20px auto;
        }

        .title .line {
            /*display: inline-block;*/
            flex: 1;
            border-bottom: 1px solid #666;
            position: relative;
            top: -9px;
        }

        .title .text {
            font-size: 10px;
            padding: 2px 10px;
        }
    </style>
</head>
<body>
<select onchange="chinaChange(this,document.getElementById('city'));"
        style=" width:10%; height:30px;line-height:30px; ">
    <option value="请选择市区">请选择省份</option>
    <option value="北京市">
        北京市
    </option>
    <option value="上海市">
        上海市
    </option>
    <option value="天津市">
        天津市
    </option>
    <option value="重庆市">
        重庆市
    </option>
    <option value="黑龙江省">
        黑龙江省
    </option>
    <option value="吉林省">
        吉林省
    </option>
    <option value="辽宁省">
    辽宁省
    </option>
    <option value="内蒙古自治区">
    内蒙古自治区
    </option>
    <option value="河北省">
    河北省
    </option>
    <option value="山西省">
    山西省
    </option>
    <option value="陕西省">
    陕西省
    </option>
    <option value="山东省">
    山东省
    </option>
    <option value="新疆维吾尔自治区">
    新疆维吾尔自治区
    </option>
    <option value="西藏自治区">
    西藏自治区
    </option>
    <option value="青海省">
    青海省
    </option>
    <option value="甘肃省">
    甘肃省
    </option>
    <option value="宁夏回族自治区">
    宁夏回族自治区
    </option>
    <option value="河南省">
    河南省
    </option>
    <option value="江苏省">
    江苏省
    </option>
    <option value="湖北省">
    湖北省
    </option>
    <option value="浙江省">
    浙江省
    </option>
    <option value="安徽省">
    安徽省
    </option>
    <option value="福建省">
    福建省
    </option>
    <option value="江西省">
    江西省
    </option>
    <option value="湖南省">
    湖南省
    </option>
    <option value="贵州省">
    贵州省
    </option>
    <option value="四川省">
    四川省
    </option>
    <option value="广东省">
    广东省
    </option>
    <option value="云南省">
    云南省
    </option>
    <option value="广西壮族自治区">
    广西壮族自治区
    </option>
    <option value="海南省">
    海南省
    </option>
    <option value="香港特别行政区">
    香港特别行政区
    </option>
    <option value="台湾省">
    台湾省
    </option>
    <option value="澳门特别行政区">
    澳门特别行政区
    </option>
</select>
<select name="city" id="city" style=" width:10%; height:30px;line-height:30px; ">
    <option value="请选择市区">请选择市区</option>
</select>

<button id="btn">查询天气</button>

<div class="title">
    <div class="line"></div>
    <div class="text">天气预报</div>
    <div class="line"></div>
</div>

<div>
    <ul id="showData"></ul>
</div>
<script>
    let btn = document.getElementById('btn');
    let showData = document.getElementById('showData');

    function smartloaddata(data) {
        console.log(data);
        let tag = '';
        let weather = data.weather;
        for (let item of weather) {
            let date = item.date;
            let day = item.info.day;

            tag += `<li>日期: ${date}</li>`;
            tag += `<li>白天天气: ${day[1]}</li>`;
            tag += `<li>白天温度: ${day[2]}</li>`;
            tag += `<li>白天风向: ${day[3]}</li>`;
            tag += `<li>白天风速: ${day[4]}</li>`;
        }
        showData.innerHTML = tag;

    }

    btn.onclick = function () {
        showData.innerHTML = '';
        let cityCode = document.getElementById('city').value;
        var url = 'http://cdn.weather.hao.360.cn/api_weather_info.php?app=hao360&_jsonp=smartloaddata&code=' + cityCode;
        let script = document.createElement('script');
        script.src = url;
        document.body.appendChild(script);
    }
</script>
<script src="./index.js"></script>
<!--错误-->
<!--不能将js中的变量直接给html-->
<!--<script src=url></script>-->
</body>
</html>